<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="base :: common_header(~{::title})">
    <title>Тема</title>
</head>

<body>

    <div th:replace="base :: navigation"></div>

    <div class="container">
        <div class="row row-margin-bottom">
            <!--    Вставка боковой панели  -->
            <div th:replace="base :: side-panels"></div>
            <!-- *** -->
            <div class="main-content col-9 border rounded-lg">
                <h5 class="centered green-h">Тема "[[ ${chapter.name} ]]"</h5>

                <ul class="nav nav-pills tabs-menu">
                    <li>
                        <a class="nav-link active" href="#" id="linkTmOfChapter"><i class="fa fa-book fa-fw"
                                                                                    aria-hidden="true"></i>&nbsp;Теоретический материал</a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" id="linkThemeProblems"><i class="fa fa-tasks"
                                                                               aria-hidden="true"></i>&nbsp;Задачи</a>
                    </li>
                </ul>

                <div class="container" id="containerOfTabs">

                    <div id="tmOfChapter" class="col-align-centered">

                        <div class="row row-table table-header">
                            <div class="col">
                                Наименование
                            </div>
                        </div>

                        <div th:if="${#lists.isEmpty(chapter.chapterTheories)}" class="alert alert-warning" role="alert">
                            Тема пока не содержит ни одного теоретического материала
                        </div>

                        <div class="row row-table" th:each="theory : ${chapter.chapterTheories}">
                            <div class="col">
                                <a th:unless="${theory.file}" th:href="${theory.source}" target="_blank">
                                    <i class="fa fa-link" aria-hidden="true"></i>&nbsp;[[ ${theory.name} ]]
                                </a>
                                <a th:if="${theory.file}" href="javascript://" th:attr="onclick=|loadFileByPath('${theory.source}')|">
                                    <i class="fa fa-file" aria-hidden="true"></i>&nbsp;
                                    [[ ${theory.name} ]]
                                </a>
                            </div>
                        </div>

                        <div class="row row-margin-top">
                            <div class="col"></div>
                        </div>
                    </div>

                    <div id="problemsOfTheme" style="display: none;">

                        <div class="col-align-centered">
                            <div class="row row-table table-header">
                                <div class="col">
                                    <i class="fa fa-tasks" aria-hidden="true"></i>&nbsp; Задача
                                </div>
                                <div class="col">
                                    <i class="fa fa-wrench" aria-hidden="true"></i>&nbsp; Сложность
                                </div>
                                <div class="col">
                                    <i class="fa fa-wrench" aria-hidden="true"></i>&nbsp; Решаемость
                                </div>
                                <div class="col">
                                    <i class="fa fa-tags" aria-hidden="true"></i>&nbsp; Теги
                                </div>
                            </div>

                            <div th:unless="${#lists.isEmpty(chapter.chapterProblems)}" class="row row-table" th:each="problem : ${chapter.chapterProblems}">
                                <div class="col">
                                    <a th:href="@{'/student/problem/'+${problem.id}}">
                                        [[ ${problem.name} ]]
                                    </a>
                                </div>
                                <div class="col">
                                    Средняя
                                </div>
                                <div class="col">
                                    [[ ${problem.countAccepted} ]]&nbsp; / [[ ${problem.totalSubmit} ]]
                                </div>
                                <div class="col">
                                   <span th:each="tag : ${problem.getHashTagsVisible()}">
                                        <a th:href="@{'/student/pool-problems/' + ${tag.id}}">
                                            #[[ ${tag.name} ]]
                                        </a>
                                        &nbsp;
                                    </span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer th:replace="base :: footer"></footer>

    <script>
        //Клик по вкладке Теоретический материал
        $('#linkTmOfChapter').click(function (e) {
            $('#linkTmOfChapter').addClass('active');
            $('#tmOfChapter').show();
        });

        //Клик по вкладке Задачи темы
        $('#linkThemeProblems').click(function (e) {
            $('#linkThemeProblems').addClass('active');
            $('#problemsOfTheme').show();
        });
        
    </script>

</body>
</html>